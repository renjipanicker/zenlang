include Mainframe;
include Button;
include TextEdit;
include WindowCreator;

public main MyMain {
    auto def = MainFrame::Definition {
                title    : "test";
                position : Window::Position {x:10;y:10;w:400;h:200;};
                visible  : true;
                child    : [ string:pointer<Window::Definition>,
                             @checkBox: &Button::Definition {
                                title   : "Check";
                                position: Window::Position {x:10;y:10;w:60;h:22;};
                                left    : Window::Anchor {target:@parent;margin:10;};
                             },
                             @outputBox: &TextEdit::Definition {
                                title:"Output";
                                position:Window::Position{x:10;y:50;w:300;h:100;};
                                multiline:true;
                             }
                           ];
             };

    auto win = WindowCreator::Create(Window::Instance(), pointer<MainFrame::Definition>(def));
    unused(win);

//    auto cb = win@checkBox;

/*
    auto mainFrame = MainFrame::Create( MainFrame::Definition{title:"test"; position:Window::Position{x:10;y:10;w:400;h:200;}; visible:true; } );
    auto checkBtn = Button::Create(mainFrame.window,
                        Button::Definition {
                            title   : "Check";
                            position: Window::Position {x:10;y:10;w:60;h:22;};
                            left    : Window::Anchor {window:mainFrame.window;margin:10;};
                        });
    auto outputBox = TextEdit::Create(mainFrame.window, TextEdit::Definition{title:"Output";position:Window::Position{x:10;y:50;w:300;h:100;};multiline:true;});

    Window::OnResize(mainFrame.window) => Window::OnResize::Handler {
        auto pp = Window::getWindowPosition(mainFrame.window);
        auto cp = Window::getChildPosition(outputBox.window);
        cp.w = pp.w - cp.x - 20;
        cp.h = pp.h - cp.y - 50;
        run Window::Move(outputBox.window, cp);
        return ();
    };

    Button::OnClick(checkBtn.window) => Button::OnClick::Handler {
        print "on click\n";
        TextEdit::AppendText(outputBox.window, "hello!\n");
        return ();
    };
*/

    return (0);
}
